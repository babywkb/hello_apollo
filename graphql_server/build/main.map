{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///./src/pubsub.js","webpack:///./src/resolvers.js","webpack:///./src/typeDefs.js","webpack:///external \"apollo-server\""],"names":["server","ApolloServer","typeDefs","resolvers","tracing","listen","then","url","console","log","pubsub","PubSub","books","id","title","author","chats","message","CHAT_CHANNEL","Query","_","input","context","info","book","find","authors","name","twitter","Mutation","addAuthor","deleteBook","changeBookTitle","publish","bookTitleChanged","sendMessage","chat","length","push","messageSent","Subscription","subscribe","asyncIterator","gql"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { typeDefs } from \"./typeDefs\";\r\nimport { resolvers } from \"./resolvers\";\r\nimport { ApolloServer } from \"apollo-server\";\r\n\r\nlet server = new ApolloServer({ typeDefs, resolvers, tracing: true });\r\n\r\nserver.listen().then(({ url }) => {\r\n  console.log(`ðŸš€  Server ready at ${url}`);\r\n});\r\n","import { PubSub } from \"apollo-server\";\r\n\r\nconst pubsub = new PubSub();\r\n\r\nexport default pubsub;\r\n","import pubsub from \"./pubsub\";\r\n\r\nconst books = [\r\n  {\r\n    id: 1,\r\n    title: \"Harry Potter and the Chamber of Secrets\",\r\n    author: \"J.K. Rowling\"\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"Jurassic Park\",\r\n    author: \"Michael Crichton\"\r\n  }\r\n];\r\n\r\nconst chats = [\r\n  {\r\n    id: 1,\r\n    message: \"Hello\",\r\n    author: \"Guillermo del Toro\"\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"World\",\r\n    author: \"Neill Blomkamp\"\r\n  }\r\n];\r\nconst CHAT_CHANNEL = \"CHAT_CHANNEL\";\r\n\r\nexport const resolvers = {\r\n  Query: {\r\n    books: (_, { input }, context, info) => {\r\n      return books;\r\n    },\r\n    book: (_, { id }) => {\r\n      return books.find(book => book.id === id);\r\n    },\r\n    authors: () => {\r\n      return [\r\n        { name: \"Todd\", twitter: \"toddmotto\" },\r\n        { name: \"React\", twitter: \"reactjs\" }\r\n      ];\r\n    },\r\n    chats: () => chats\r\n  },\r\n\r\n  Mutation: {\r\n    addAuthor: (_, { input: { name, twitter } }) => {\r\n      return {\r\n        name,\r\n        twitter\r\n      };\r\n    },\r\n    deleteBook: (_, { title }) => true,\r\n    changeBookTitle: async (_, { input }) => {\r\n      let { id, title } = input;\r\n\r\n      //simulate a big delay in processing\r\n      //await new Promise(resolve => setTimeout(resolve, 3000))\r\n\r\n      let book = books.find(book => book.id === id);\r\n\r\n      pubsub.publish(\"bookTitleChanged\", {\r\n        bookTitleChanged: { ...book, title }\r\n      });\r\n\r\n      //Return the new book title\r\n      return {\r\n        ...book,\r\n        title: title + \" test\"\r\n      };\r\n    },\r\n    sendMessage(_, { author, message }, { pubsub }) {\r\n      const chat = { id: chats.length + 1, message, author };\r\n\r\n      chats.push(chat);\r\n      pubsub.publish(\"CHAT_CHANNEL\", { messageSent: chat });\r\n      return chat;\r\n    }\r\n  },\r\n\r\n  Subscription: {\r\n    bookTitleChanged: {\r\n      subscribe: () => pubsub.asyncIterator([\"bookTitleChanged\"])\r\n    },\r\n\r\n    messageSent: {\r\n      subscribe: () => pubsub.asyncIterator(CHAT_CHANNEL)\r\n    }\r\n  }\r\n};\r\n","import { gql } from \"apollo-server\";\r\n\r\nexport const typeDefs = gql`\r\n  input AddAuthorInput {\r\n    name: String!\r\n    twitter: String\r\n  }\r\n\r\n  type Author {\r\n    name: String!\r\n    twitter: String\r\n  }\r\n\r\n  type Book {\r\n    id: Int!\r\n    title: String!\r\n    author: String!\r\n  }\r\n\r\n  input ChangeBookInput {\r\n    id: Int!\r\n    title: String!\r\n  }\r\n\r\n  type Chat {\r\n    id: Int!\r\n    message: String!\r\n    author: String!\r\n  }\r\n\r\n  input SendMessageInput {\r\n    message: String!\r\n    author: String!\r\n  }\r\n\r\n  type Query {\r\n    books: [Book]\r\n    book(id: Int!): Book\r\n    authors: [Author]\r\n    chats: [Chat]\r\n    chat(id: Int!): Chat\r\n  }\r\n\r\n  type Mutation {\r\n    changeBookTitle(input: ChangeBookInput!): Book\r\n    addAuthor(input: AddAuthorInput!): Author\r\n    deleteBook(author: String!): Boolean\r\n    sendMessage(input: SendMessageInput!): Chat\r\n    deleteMessage(author: String!): Boolean\r\n  }\r\n\r\n  type Subscription {\r\n    bookTitleChanged: Book\r\n    messageSent: Chat\r\n  }\r\n`;\r\n","module.exports = require(\"apollo-server\");"],"sourceRoot":""}